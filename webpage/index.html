<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>Smart Air Filter</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
</head>

<body class="is-preload" onload="init()">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header" class="alt">
			<a href="index.html" class="logo"><strong>TEAM</strong>RSQ</a>
			<nav>
				<a id="login"></a>
				<a href="#menu">Menu</a>
			</nav>
		</header>

		<!-- Menu -->
		<nav id="menu">
			<ul class="links">
				<li><a href="index.html">Home</a></li>
				<li><a href="status.html">Live Status</a></li>
				<li><a href="panel.html">Control Panel</a></li>
				<li><a href="elements.html">Records</a></li>
			</ul>
			<ul class="actions stacked">
				<li><a href="#" class="button primary fit">Get Started</a></li>
				<li><a href="login.html" class="button fit" id="btn1">Log In</a></li>
			</ul>
		</nav>

		<!-- Banner -->
		<section id="banner" class="major">
			<div class="inner">
				<header class="major">
					<h1>Indoor air quality solution</h1>
					<h1>all in one device.</h1>
				</header>
				<div class="content">
					<p>Revolutionary all-in-one air quality solution<br />
						powered with AI and Cloud</p>
					<ul class="actions">
						<li><a href="#one" class="button next scrolly">Download Mobile App</a></li>
					</ul>
				</div>
			</div>
		</section>

		<!-- Main -->
		<div id="main">

			<!-- One -->
			<section id="one" class="tiles">
				<article>
					<span class="image">
						<img src="images/pic01.jpg" alt="" />
					</span>
					<header class="major">
						<h3><a href="status.html" class="link">Live Status</a></h3>
						<p>Monitoring real-time status</p>
					</header>
				</article>
				<article>
					<span class="image">
						<img src="images/pic02.jpg" alt="" />
					</span>
					<header class="major">
						<h3><a href="panel.html" class="link">Control Panel</a></h3>
						<p>Remote control center</p>
					</header>
				</article>
				<article>
					<span class="image">
						<img src="images/pic03.jpg" alt="" />
					</span>
					<header class="major">
						<h3><a href="records.html" class="link">Records</a></h3>
						<p>Find records in the past</p>
					</header>
				</article>
				<article>
					<span class="image">
						<img src="images/pic04.jpg" alt="" />
					</span>
					<header class="major">
						<h3><a href="monitor.html" class="link">Monitor</a></h3>
						<p>Real-time data monitor</p>
					</header>
				</article>
			</section>

			<!-- Two -->
			<section id="two">
				<div class="inner">
					<header class="major">
						<h2>About us</h2>
					</header>
					<p>Robustness, safety, and quality. Start at 2022 spring, team RSQ bring you the modern solution of
					</p>
					<ul class="actions">
						<li><a href="status.html" class="button next">More</a></li>
					</ul>
				</div>
			</section>

		</div>

		<!-- Contact -->
		<section id="contact">
			<div class="inner">
				<section>
					<form method="post" action="#">
						<div class="fields">
							<div class="field half">
								<label for="name">Name</label>
								<input type="text" name="name" id="name" />
							</div>
							<div class="field half">
								<label for="email">Email</label>
								<input type="text" name="email" id="email" />
							</div>
							<div class="field">
								<label for="message">Message</label>
								<textarea name="message" id="message" rows="6"></textarea>
							</div>
						</div>
						<ul class="actions">
							<li><input type="submit" value="Send Message" class="primary" /></li>
							<li><input type="reset" value="Clear" /></li>
						</ul>
					</form>
				</section>
				<section class="split">
					<section>
						<div class="contact-method">
							<span class="icon solid alt fa-envelope"></span>
							<h3>Email</h3>
							<a href="#">meali@ucdavis.edu</a>
							<a href="#">htzhong@ucdavis.edu</a>
						</div>
					</section>
					<section>
						<div class="contact-method">
							<span class="icon solid alt fa-phone"></span>
							<h3>Phone</h3>
							<span>(530) 702-8833</span>
						</div>
					</section>
					<section>
						<div class="contact-method">
							<span class="icon solid alt fa-home"></span>
							<h3>Address</h3>
							<span>1 Shields Ave<br />
								Davis, CA 95616<br />
								United States of America</span>
						</div>
					</section>
				</section>
			</div>
		</section>

		<!-- Footer -->
		<footer id="footer">
			<div class="inner">
				<ul class="icons">
					<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
					<li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
					<li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; Team RSQ</li>
					<li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
				</ul>
			</div>
		</footer>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<script>


		function init() {
			callAPI();
		}


		// define the callAPI function that takes a first name and last name as parameters
		var callAPI = () => {
			var IP;

			// instantiate a headers object
			var myHeaders = new Headers();
			// add content type header to object
			myHeaders.append("Content-Type", "application/json");
			// using built in JSON utility package turn object to string and store in a variable
			var requestOptions1 = {
				method: 'GET',
				headers: myHeaders,
				redirect: 'follow'
			};




			// make API call with parameters and use promises to get response
			fetch("https://api.ipify.org/?format=json", requestOptions1)
				.then(response => response.text())
				.then(
					//function (result) {
					result => JSON.parse(result).ip
					//}
				)
				.then(
					function (IP) {
						var raw = JSON.stringify(
							{
								Auth: 1,
								IP: IP,
								Timestamp: Date.now()
							}
						);

						// create a JSON object with parameters for API call and store in a variable
						var requestOptions2 = {
							method: 'POST',
							headers: myHeaders,
							body: raw,
							redirect: 'follow'
						};

						fetch("https://7a1reou5uk.execute-api.us-west-2.amazonaws.com/default/EEC193_LOGIN_CHK", requestOptions2)
							.then(response => response.text())
							.then(
								function (result) {
									var res = JSON.parse(result).body;

									if (res == "Invalid" || res == "NotFound") {
										document.getElementById("login").innerText = "LOGIN";
										document.getElementById("login").href = "login.html";
									}
									else
									{
										document.getElementById("login").innerText = 'Welcome, ' + res;
										document.getElementById("btn1").style.display = 'none';
									}

								}
							)
							.catch(error => console.log('error', error));
					}
				)
				.catch(error => console.log('error', error));



			// make API call with parameters and use promises to get response

		}
	</script>

</body>

</html>